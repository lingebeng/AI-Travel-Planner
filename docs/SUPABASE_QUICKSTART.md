# Supabase å¿«é€Ÿæ­å»ºæŒ‡å—

## ğŸ“ æ‰§è¡Œæ­¥éª¤ï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰

### ç¬¬ 1 æ­¥ï¼šæ‰“å¼€ Supabase Dashboard

1. è®¿é—® https://app.supabase.com
2. ç™»å½•ä½ çš„è´¦å·
3. æ‰¾åˆ°é¡¹ç›®ï¼š**AI Travel Planner**ï¼ˆé¡¹ç›® URL: https://dwnvrfmeerpxfnvqjgxu.supabase.coï¼‰

### ç¬¬ 2 æ­¥ï¼šæ‰“å¼€ SQL Editor

1. åœ¨å·¦ä¾§èœå•ä¸­ç‚¹å‡» **SQL Editor**ï¼ˆå›¾æ ‡ï¼š</> ä»£ç ï¼‰
2. ç‚¹å‡»å³ä¸Šè§’çš„ **+ New query** æŒ‰é’®

### ç¬¬ 3 æ­¥ï¼šæ‰§è¡Œ SQL è„šæœ¬

1. æ‰“å¼€é¡¹ç›®æ–‡ä»¶ï¼š`docs/supabase_init.sql`
2. **å¤åˆ¶å…¨éƒ¨å†…å®¹**ï¼ˆCtrl/Cmd + Aï¼Œç„¶å Ctrl/Cmd + Cï¼‰
3. **ç²˜è´´åˆ° SQL Editor** ä¸­ï¼ˆCtrl/Cmd + Vï¼‰
4. ç‚¹å‡»å³ä¸‹è§’çš„ **RUN** æŒ‰é’®ï¼ˆæˆ–æŒ‰ Ctrl/Cmd + Enterï¼‰
5. ç­‰å¾…æ‰§è¡Œå®Œæˆï¼ˆçº¦ 2-3 ç§’ï¼‰

### ç¬¬ 4 æ­¥ï¼šéªŒè¯åˆ›å»ºç»“æœ

æ‰§è¡ŒæˆåŠŸåï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
NOTICE: ========================================
NOTICE: Supabase æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
NOTICE: ========================================
NOTICE: å·²åˆ›å»ºçš„è¡¨:
NOTICE:   - profiles (ç”¨æˆ·èµ„æ–™è¡¨)
NOTICE:   - itineraries (è¡Œç¨‹è¡¨)
NOTICE:   - expenses (è´¹ç”¨è®°å½•è¡¨)
...
```

### ç¬¬ 5 æ­¥ï¼šæ£€æŸ¥è¡¨æ˜¯å¦åˆ›å»º

1. åœ¨å·¦ä¾§èœå•ä¸­ç‚¹å‡» **Table Editor**ï¼ˆå›¾æ ‡ï¼šğŸ“‹ è¡¨æ ¼ï¼‰
2. ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹ 3 ä¸ªè¡¨ï¼š
   - âœ… **profiles** - ç”¨æˆ·èµ„æ–™è¡¨
   - âœ… **itineraries** - è¡Œç¨‹è¡¨
   - âœ… **expenses** - è´¹ç”¨è®°å½•è¡¨

### ç¬¬ 6 æ­¥ï¼šæµ‹è¯•æ•°æ®åº“è¿æ¥

è¿è¡Œ Python æµ‹è¯•è„šæœ¬ï¼š

```bash
cd backend
source ../.venv/bin/activate
python test_supabase.py
```

æœŸæœ›è¾“å‡ºï¼š
```
ğŸ” æµ‹è¯• Supabase è¿æ¥...
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼
ğŸ“Š profiles è¡¨è®°å½•æ•°: 0
ğŸ“Š itineraries è¡¨è®°å½•æ•°: 0
ğŸ“Š expenses è¡¨è®°å½•æ•°: 0
...
ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

---

## âœ… å®Œæˆï¼

æ•°æ®åº“å·²ç»æ­å»ºå®Œæˆï¼Œç°åœ¨ä½ å¯ä»¥ï¼š

1. âœ… **å¯ç”¨ Authentication**ï¼ˆå¯é€‰ï¼‰
   - åœ¨ Supabase Dashboard ä¸­ç‚¹å‡» **Authentication**
   - é…ç½® Email Providerï¼ˆå·²é»˜è®¤å¯ç”¨ï¼‰
   - æˆ–é…ç½® OAuth Providerï¼ˆGoogleã€GitHub ç­‰ï¼‰

2. âœ… **æŸ¥çœ‹ API æ–‡æ¡£**
   - ç‚¹å‡»å·¦ä¾§ **API**
   - æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£
   - å¤åˆ¶ API URL å’Œ Keysï¼ˆå·²åœ¨ .env ä¸­é…ç½®ï¼‰

3. âœ… **æµ‹è¯• API**
   - ä½¿ç”¨ Postman æˆ– curl æµ‹è¯•
   - æˆ–ç›´æ¥åœ¨åç«¯ä»£ç ä¸­ä½¿ç”¨

---

## ğŸ“Š æ•°æ®åº“ç»“æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Supabase Database              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚profilesâ”‚    â”‚itinerariesâ”‚ â”‚expensesâ”‚
    â”‚(ç”¨æˆ·)  â”‚    â”‚  (è¡Œç¨‹)   â”‚ â”‚ (è´¹ç”¨) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³ç³»è¯´æ˜ï¼š
- `profiles.id` â† `auth.users.id`ï¼ˆä¸€å¯¹ä¸€ï¼‰
- `itineraries.user_id` â†’ `auth.users.id`ï¼ˆä¸€å¯¹å¤šï¼‰
- `expenses.user_id` â†’ `auth.users.id`ï¼ˆä¸€å¯¹å¤šï¼‰
- `expenses.itinerary_id` â†’ `itineraries.id`ï¼ˆä¸€å¯¹å¤šï¼‰

---

## ğŸ” å®‰å…¨é…ç½®

æ‰€æœ‰è¡¨éƒ½å·²å¯ç”¨ **Row Level Security (RLS)**ï¼š
- âœ… ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- âœ… è‡ªåŠ¨éªŒè¯ JWT token
- âœ… é˜²æ­¢æ•°æ®æ³„éœ²

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å¯ä»¥ï¼š
1. å¼€å‘å‰ç«¯ç”¨æˆ·è®¤è¯åŠŸèƒ½
2. å®ç°è¡Œç¨‹ä¿å­˜/åŠ è½½åŠŸèƒ½
3. æ·»åŠ è´¹ç”¨è®°å½•åŠŸèƒ½

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š`docs/SUPABASE_SETUP.md`

---

**åˆ›å»ºæ—¶é—´**: 2025-11-08
**é¢„è®¡å®Œæˆæ—¶é—´**: 5 åˆ†é’Ÿ
