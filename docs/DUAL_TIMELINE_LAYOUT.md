# 行程页面双时间轴布局说明

## 📐 布局结构

### 整体布局（3层结构）

```
┌─────────────────────────────────────────────────────────────────┐
│                         行程标题栏                               │
│  杭州 2日游                                                      │
│  📅 日期  👥 人数  💰 预算                                       │
│  [简单编辑] [高级编辑] [下载PDF]                                │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                         行程亮点                                 │
│  探索杭州的自然风光与文化魅力...                                │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                         预算分配                                 │
│  [交通] [住宿] [餐饮] [景点] [购物] [其他]                      │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  每日行程 TAB: [第1天] [第2天]                                   │
├─────────────────────────────────────────────────────────────────┤
│  第1天 - 西湖初探 (2025-11-10)                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ 第一排：横版时间轴（全宽）─────────────────────────────┐    │
│  │                                                           │    │
│  │  09:00 ─── 2h ──→ 12:00 ─── 1.5h ──→ 15:00             │    │
│  │   📷            ☕            🏠                          │    │
│  │   ↓             ↓            ↓                           │    │
│  │ [西湖卡片]   [楼外楼]    [酒店]                          │    │
│  │                                                           │    │
│  │ ← 横向滚动查看完整时间轴 →                               │    │
│  └───────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─ 第二排：左竖版 + 右地图 ─────────────────────────────┐      │
│  │                                │                        │      │
│  │  竖版 Timeline (左侧)          │   地图视图 (右侧)      │      │
│  │  ━━━━━━━━━━━━━━              │  ┌──────────────┐      │      │
│  │  09:00 📷                      │  │              │      │      │
│  │    │                           │  │   [地图]     │      │      │
│  │    ▼                           │  │              │      │      │
│  │  ┌───────────────┐            │  │              │      │      │
│  │  │ 西湖          │            │  │              │      │      │
│  │  │ 游览西湖十景   │            │  └──────────────┘      │      │
│  │  │ 📍 西湖风景区  │            │  [全屏地图]            │      │
│  │  │ 💰 免费        │            │                        │      │
│  │  │ 💡 建议早上    │            │  ← sticky固定         │      │
│  │  └───────────────┘            │                        │      │
│  │    │                           │                        │      │
│  │  12:00 ☕                      │                        │      │
│  │    │                           │                        │      │
│  │    ▼                           │                        │      │
│  │  ┌───────────────┐            │                        │      │
│  │  │ 楼外楼        │            │                        │      │
│  │  │ 品尝杭帮菜     │            │                        │      │
│  │  └───────────────┘            │                        │      │
│  │    │                           │                        │      │
│  │  15:00 🏠                      │                        │      │
│  │    ...                         │                        │      │
│  │                                │                        │      │
│  └────────────────────────────────┴────────────────────────┘      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  住宿推荐 (左半)          │    旅行贴士 (右半)                   │
│  ─────────────────        │    ─────────────────               │
│  🏠 西湖国宾馆            │    ✨ 提前预订酒店                  │
│  湖景房，环境优雅          │    ✨ 建议办理市民卡                │
│  ¥800-1500/晚             │    ✨ 避开节假日高峰                │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🎯 设计理念

### 双时间轴优势

#### 横版时间轴（概览）
- **位置**：顶部全宽
- **目的**：快速预览全天行程流程
- **特点**：
  - 一目了然的时间顺序
  - 清晰的时间间隔
  - 彩色图标快速识别活动类型
  - 横向滚动查看所有内容

#### 竖版时间轴（详情）
- **位置**：左侧主内容区
- **目的**：详细展示每个活动信息
- **特点**：
  - 完整的活动描述
  - 详细的位置和费用
  - 小贴士和建议
  - 点击交互

### 互补关系

```
横版时间轴：快速浏览 → 把握整体
     ↓
用户选择感兴趣的活动
     ↓
竖版时间轴：详细了解 → 深入细节
```

---

## 📏 响应式设计

### 桌面端（> 1024px）

```
┌─────────────────────────────────────────────────────┐
│  横版时间轴（全宽）                                  │
│  ← 横向滚动 →                                       │
└─────────────────────────────────────────────────────┘
┌──────────────────────────┬──────────────────────────┐
│  竖版 Timeline (58%)     │  地图 (42%)              │
│  ↕ 纵向滚动              │  sticky 固定             │
└──────────────────────────┴──────────────────────────┘
```

### 平板端（768px - 1024px）

```
┌─────────────────────────────────────────────────────┐
│  横版时间轴（全宽）                                  │
└─────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────┐
│  竖版 Timeline（全宽）                               │
└─────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────┐
│  地图（全宽）                                        │
└─────────────────────────────────────────────────────┘
```

### 移动端（< 768px）

```
┌───────────────────────────────┐
│  横版时间轴（纵向布局）        │
│  ↕ 纵向滚动                   │
└───────────────────────────────┘
┌───────────────────────────────┐
│  竖版 Timeline                │
│  ↕ 纵向滚动                   │
└───────────────────────────────┘
┌───────────────────────────────┐
│  地图                         │
└───────────────────────────────┘
```

---

## 🎨 视觉层次

### 信息优先级

1. **最高优先级**：横版时间轴
   - 用户首先看到的内容
   - 提供整体时间概览
   - 醒目的彩色设计

2. **次优先级**：竖版时间轴
   - 详细的活动信息
   - 用户深入了解的入口
   - 占据主要内容区

3. **辅助信息**：地图
   - 位置可视化
   - sticky 固定方便查看
   - 不占用过多注意力

4. **补充信息**：住宿和贴士
   - 底部额外建议
   - 不干扰主要行程内容

---

## 🔧 技术实现

### 布局代码结构

```tsx
<Card className="itinerary-card">
  <Tabs activeKey={activeDay} onChange={setActiveDay}>
    <TabPane tab="第 1 天" key="1">
      <div className="day-header">
        {/* 标题和日期 */}
      </div>

      {/* 第一排：横版时间轴 - 全宽 */}
      <div style={{ marginBottom: 32 }}>
        <HorizontalTimeline
          items={day.items}
          onLocationClick={handleLocationClick}
        />
      </div>

      {/* 第二排：左竖版 + 右地图 */}
      <Row gutter={[24, 24]}>
        {/* 左侧：竖版 Timeline (58%) */}
        <Col xs={24} lg={14}>
          <Timeline mode="left">
            {/* 活动项 */}
          </Timeline>
        </Col>

        {/* 右侧：地图 (42%) */}
        <Col xs={24} lg={10}>
          <Card style={{ position: 'sticky', top: 20 }}>
            <SimpleMapView />
          </Card>
        </Col>
      </Row>
    </TabPane>
  </Tabs>
</Card>
```

### 关键样式

```scss
// 地图 sticky 固定
.map-card {
  position: sticky;
  top: 20px;  // 距离顶部20px
}

// 横版时间轴底部间距
.horizontal-timeline-wrapper {
  margin-bottom: 32px;
}

// 响应式列宽
.timeline-column {
  @media (min-width: 1024px) {
    flex: 0 0 58.333%;  // lg:14/24
  }
}

.map-column {
  @media (min-width: 1024px) {
    flex: 0 0 41.667%;  // lg:10/24
  }
}
```

---

## 💡 交互设计

### 横版时间轴交互
1. **悬停卡片**：向上浮动，显示阴影
2. **点击卡片**：打开地图导航
3. **横向滚动**：查看完整行程
4. **移动端**：触摸滑动

### 竖版时间轴交互
1. **悬停卡片**：边框高亮
2. **点击卡片**：打开地图导航
3. **点击位置链接**：直接打开高德地图
4. **纵向滚动**：查看详细内容

### 地图交互
1. **Sticky 固定**：滚动时保持可见
2. **点击标记**：显示地点信息
3. **全屏按钮**：打开全屏地图抽屉
4. **实时跟随**：随 activeDay 更新

---

## 🎯 用户体验流程

### 场景 1：快速了解行程

```
用户进入页面
    ↓
看到横版时间轴
    ↓
快速扫描全天安排（3秒）
    ↓
了解时间流程和活动类型
    ↓
决定是否深入查看
```

### 场景 2：详细规划行程

```
用户查看横版时间轴
    ↓
发现感兴趣的活动
    ↓
向下滚动查看竖版详情
    ↓
阅读详细描述和贴士
    ↓
点击位置打开地图
    ↓
查看地理位置和路线
```

### 场景 3：编辑调整行程

```
用户想修改某个活动
    ↓
在竖版时间轴找到该活动
    ↓
点击"高级编辑"
    ↓
在 JSON 中修改时间/地点
    ↓
保存后实时更新两个时间轴
```

---

## 📊 布局比例

### 宽度分配（桌面端）

- **横版时间轴**：100%（全宽）
- **竖版时间轴**：58.33%（14/24列）
- **地图**：41.67%（10/24列）

### 高度规划

- **横版时间轴**：约 200-300px（依内容）
- **竖版时间轴**：自适应高度
- **地图**：400px（固定高度）

---

## 🔍 可访问性

### 键盘导航
- Tab 键切换焦点
- 方向键滚动时间轴
- Enter 触发点击

### 屏幕阅读器
- 语义化 HTML 结构
- aria-label 标注
- 清晰的层级关系

---

## 🎉 设计优势

1. **双重视角**：概览 + 详情，满足不同需求
2. **空间高效**：横版时间轴节省垂直空间
3. **视觉美观**：彩色时间轴 + 清晰卡片
4. **信息完整**：不遗漏任何细节
5. **响应式强**：完美适配各种设备
6. **交互流畅**：多种交互方式，自然流畅

---

**创建日期**: 2025-11-09
**版本**: v2.0（双时间轴布局）
**状态**: ✅ 已实现
